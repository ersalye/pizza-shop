(this["webpackJsonppizza-shop"]=this["webpackJsonppizza-shop"]||[]).push([[0],{26:function(e,t,a){e.exports=a(43)},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),o=a(11),m=a(24),s=a(6),u=a(2),i=a(7),d=a.n(i),b=a(10),f=a(13),p=a(14),E=new(function(){function e(){Object(f.a)(this,e),this._apiBase="https://pizza-shop-66ecb.firebaseio.com/"}return Object(p.a)(e,[{key:"getData",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this._apiBase,"/").concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMenu",value:function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("menu.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),v=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=!1;function t(){return(t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getMenu();case 2:a=t.sent,e||r(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[]),a},h=a(3),g=function(e){var t=e.cartItems,a=e.pricesString,n=t.count;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary justify-content-end sticky-top"},r.a.createElement("span",{className:"badge badge-info"},a),r.a.createElement(h.b,{to:"/order"},r.a.createElement("button",{className:"btn btn-secondary","data-toggle":"modal","data-target":"#exampleModal"},r.a.createElement("svg",{className:"bi bi-cart3",width:"25px",height:"25px",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})),r.a.createElement("span",{className:"badge badge-info"},n))))};a(37),a(38);var y=function(e){var t=e.children,a=e.handler,c=Object(n.useRef)(null);return function(e,t){Object(n.useEffect)((function(){function a(a){e.current&&!e.current.contains(a.target)&&t()}return document.addEventListener("mousedown",a),document.addEventListener("touchmove ",a),document.addEventListener("touchstart ",a),document.addEventListener("scroll",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchmove ",a),document.removeEventListener("touchstart ",a),document.removeEventListener("scroll",a)}}),[t,e])}(c,a),r.a.createElement("div",{ref:c},t)},N=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(u.a)(a,2),l=c[0],o=c[1];return r.a.createElement(y,{handler:function(){return o(!1)}},r.a.createElement("div",{className:"burger"},r.a.createElement("details",{open:l,onClick:function(e){return function(e){e.preventDefault(),o(!l)}(e)}},r.a.createElement("summary",{className:"btn btn-primary burger__summary px-1 py-0 my-1"},r.a.createElement("svg",{className:"bi bi-list",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"}))),r.a.createElement("div",{className:"burger__content rounded mt-2 px-2 pb-2"},t))))},O=function(){var e=Array(3).fill(1).map((function(e,t){return r.a.createElement("button",{key:t,type:"button",className:"btn btn-primary mt-2 w-100"},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading...")}));return r.a.createElement("div",null,e)},j=function(e){var t=e.menuItems.map((function(e){return r.a.createElement(h.b,{to:"/menu/".concat(e.header),key:e.id},r.a.createElement("button",{type:"button",className:"btn btn-primary mt-2 w-100"},e.header))}));return t.length||(t=r.a.createElement(O,null)),r.a.createElement("div",{className:"sidebar rounded m-2 px-2 pb-2"},r.a.createElement("div",{className:"sidebar-items"},t),r.a.createElement("div",{className:"sidebar-burger-menu"},r.a.createElement(N,null,t)))},w=(a(39),a(40),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.13,a=e.toFixed(2),n=(e*t).toFixed(2);return"".concat(a,"\u20ac / ").concat(n,"$")}),C=function(e){var t=e.name,a=e.description,n=e.imageUrl,c=e.addToCart,l=e.price,o=w(l);return r.a.createElement("div",{className:"card mr-3 mb-2 border-secondary card-component"},r.a.createElement("h3",{className:"card-header"},t),r.a.createElement("div",{className:"image-wrap"},r.a.createElement("img",{className:"image",src:n,alt:t})),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},a)),r.a.createElement("div",{className:"card-footer text-muted d-flex justify-content-between align-items-baseline"},r.a.createElement("span",null,o),r.a.createElement("button",{onClick:c,className:"btn btn-secondary"},"Add +")))},k=function(e){var t,a=e.menuItem,n=e.addToCart,c=null===a||void 0===a?void 0:a.header,l=null===a||void 0===a?void 0:a.items;return l&&(t=l.map((function(e){return r.a.createElement(C,{key:c+e.id,name:e.name,description:e.description,imageUrl:e.img,addToCart:function(){return n(e.id)},price:e.price})}))),r.a.createElement("div",{className:"mr-2 mt-2"},r.a.createElement("h1",null,c),r.a.createElement("div",{className:"d-flex justify-content-start flex-wrap w-100"},t))},x=a(1),I=function(){return r.a.createElement("div",{className:"spinner-border m-2",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},F=function(e){var t=e.menuItems.map((function(e){return r.a.createElement(h.b,{className:"btn btn-link",to:"/menu/".concat(e.header),key:e.id},e.header)}));return r.a.createElement("div",{className:"jumbotron bg-transparent"},r.a.createElement("h1",null,"Welcome to Pizza-Shop!"),r.a.createElement("h4",{className:"text-muted"},"Original italian pizzas with fresh dough and carefully selected natural ingredients."),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("h4",null,"In our restaurants pizzas are baked in a wood brick oven."),r.a.createElement("h5",null,"Our menu:"),t.length?r.a.createElement("h5",null,t):r.a.createElement(I,null))},S=(a(41),a(42),function(e){var t=e.id,a=e.name,n=e.img,c=e.quantity,l=e.priceString,o=e.addToCart,m=e.removeFromCart,s=e.deleteFromCart;return r.a.createElement("div",{key:t,className:"mb-3 mr-5 p-3 order-item"},r.a.createElement("div",{className:"mb-3 image-order-wrap"},r.a.createElement("span",null,r.a.createElement("strong",null,a)),r.a.createElement("img",{className:"image-order border border-secondary rounded",src:n,alt:a})),r.a.createElement("div",{className:"my-1"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return m(t)}},r.a.createElement("strong",null,"-")),r.a.createElement("span",{className:"mx-2"},c),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return o(t)}},r.a.createElement("strong",null,"+"))),r.a.createElement("div",{className:"my-1"},r.a.createElement("span",{className:"mr-2"},l),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return s(t)}},r.a.createElement("strong",null,"x"))))}),z=function(){return r.a.createElement("div",{className:"alert alert-secondary"},r.a.createElement("p",{className:"mb-0"},"You have no items in your shopping cart"))},H=function(e){var t=e.orderHistory,a=e.setCartItems,c=Object(n.useState)(!1),l=Object(u.a)(c,2),o=l[0],m=l[1],s=t.map((function(e){var t=Object.keys(e)[0],n=new Date(Number(t)),c="".concat(n.getDate(),".").concat(n.getMonth(),".").concat(n.getUTCFullYear(),"\n       ").concat(n.getHours(),":").concat(n.getMinutes());return r.a.createElement("button",{key:t,className:"btn btn-outline-info mb-1 d-block",onClick:function(){return a(e[t])}},c)}));return r.a.createElement("div",{className:"mb-3"},r.a.createElement("span",{className:"text-info"},"You can repeat your order from the order history with one click."),r.a.createElement("details",{open:o,onClick:function(e){return function(e){e.preventDefault(),m(!o)}(e)}},r.a.createElement("summary",null,r.a.createElement("span",{className:"text-info"},"Order history")),r.a.createElement("div",{className:"rounded mt-2 px-2 pb-2"},s)))},M=function(e){var t=e.cartItems,a=e.flatMenu,n=e.currencyRate,c=e.pricesString,l=e.addToCart,o=e.removeFromCart,m=e.deleteFromCart,u=e.orderHistory,i=e.setCartItems,d=Object(s.a)({},t);delete d.count;var b=Object.keys(d),f=b.map((function(e){var t=function(e,t){var a="Pizza Name",r=0,c="",l=1,o="",m=t.find((function(t){return Number(t.id)===Number(e)}));m&&(a=m.name,r=m.price,c=m.img,l=d[e],o=w(r*l,n));return{name:a,img:c,quantity:l,priceString:o}}(e,a),c=Object(s.a)({id:e},t,{addToCart:l,removeFromCart:o,deleteFromCart:m});return r.a.createElement(S,Object.assign({key:e},c))})),p=f.length,E=r.a.createElement(h.b,{to:"/confirm"},r.a.createElement("button",{type:"button",className:"btn btn-info mb-5"},"ORDER NOW"));return r.a.createElement("div",{className:"mr-2 mt-2 order-page"},r.a.createElement("h1",null,"Order"),p?f:r.a.createElement(z,null),r.a.createElement("h3",null,c),p?E:null,r.a.createElement(H,{orderHistory:u,setCartItems:i}))},L=function(e,t){var a=Object(s.a)({},e);delete a.count;var n=0;return Object.keys(a).forEach((function(e){var r=t.find((function(t){return Number(t.id)===Number(e)}));if(r){var c=a[e],l=r.price;n+=l*c}})),n},T=function(e){var t=e.inputId,a=e.label,c=e.placeholder,l=e.warningMessage,o=e.setValidForm,m=e.disabled,s=Object(n.useState)(!0),i=Object(u.a)(s,2),d=i[0],b=i[1],f=Object(n.useState)(""),p=Object(u.a)(f,2),E=p[0],v=p[1],h=function(e){""===e.split(" ").join("")?(b(!1),o(!1)):(b(!0),o(!0))},g="form-control";return d||(g+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:a},a),r.a.createElement("input",{type:"text",className:g,id:t,"aria-describedby":"emailHelp",placeholder:c,value:E,onChange:function(e){return function(e){v(e.target.value),h(e.target.value)}(e)},onBlur:function(){return h(E)},disabled:m}),r.a.createElement("div",{className:"invalid-feedback"},l))},D=function(e){var t=e.price,a=e.cartItems,c=e.clearCart,l=e.saveOrderToHistory,o=Object(n.useState)({name:!1,surname:!1,address:!1}),m=Object(u.a)(o,2),i=m[0],d=m[1],b=Object(n.useState)(!0),f=Object(u.a)(b,2),p=f[0],E=f[1],v=Object(n.useState)(!1),g=Object(u.a)(v,2),y=g[0],N=g[1],O=(1e3*Math.random()).toFixed(),j=t+10,C=w(10),k=w(j),x="btn btn-info",I=!y&&Object.keys(a).length<=1;p&&!y||(x+=" disabled"),Object(n.useEffect)((function(){var e=Object.values(i).every((function(e){return e}));E(!!e)}),[i]);var F=function(e,t){d((function(a){var n=Object(s.a)({},a);return n[e]=t,n}))},S=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-0"},"Delivery ",C," (already included)"),r.a.createElement("p",{className:"mb-0"},"(Delivery is free if your total price is more than 250\u20ac / 282.5$)")),H=r.a.createElement("div",{className:"alert alert-warning"},r.a.createElement("p",{className:"mb-0"},"Total price: ",k),t>=250?null:S),M=r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("p",{className:"mb-0"},"Your order has been confirmed"),r.a.createElement("p",{className:"mb-0"},"Order number: ",O)),L=r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{inputId:"nameInput",label:"Name*",placeholder:"Enter your name",warningMessage:"Please enter your name",setValidForm:function(e){return F("name",e)},disabled:y}),r.a.createElement(T,{inputId:"surnameInput",label:"Surname*",placeholder:"Enter your surname",warningMessage:"Please enter your surname",setValidForm:function(e){return F("surname",e)},disabled:y}),r.a.createElement(T,{inputId:"addressInput",label:"Address*",placeholder:"Enter your address",warningMessage:"Please enter your Address",setValidForm:function(e){return F("address",e)},disabled:y}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"commentsArea"},"Comments"),r.a.createElement("textarea",{className:"form-control",id:"commentsArea",rows:"3",disabled:y})),y?M:H,r.a.createElement("button",{type:"submit",className:x,onClick:function(e){return function(e){if(e.preventDefault(),p&&!y){N(!0);var t=Date.now();l(t,a),c()}}(e)}},"CONFIRM"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"mr-4"},r.a.createElement("fieldset",null,r.a.createElement("legend",null,r.a.createElement("h1",null,"Confirmation"),r.a.createElement(h.b,{to:"/order"},"to order page"),I?r.a.createElement(z,null):null),I?null:L)))};var A=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(u.a)(a,2),c=r[0],l=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;l(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},R=a(23),B=a(25),_=function(e){Object(B.a)(a,e);var t=Object(R.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(p.a)(a,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",{className:"alert alert-danger m-3"},"Something went wrong. Try",r.a.createElement(h.b,{to:"/"}," Main page")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),a}(n.Component);var P=function(){var e=A("cartItems",{count:0}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=A("orderHistory",[]),i=Object(u.a)(l,2),d=i[0],b=i[1],f=Object(n.useState)(!1),p=Object(u.a)(f,2),E=p[0],y=p[1],N=Object(n.useState)(!0),O=Object(u.a)(N,2),C=O[0],S=O[1],z=v();Object(n.useEffect)((function(){y(!1),S(!0)}),[]),Object(n.useEffect)((function(){z?(y(!1),z.length&&S(!1)):(y(!0),S(!1))}),[z]);var H=[],T=[];if(z){H=z.map((function(e){return{header:e.header,id:e.id}}));var R=Object.keys(z);T=R.flatMap((function(e){return z[e].items}))}var B=L(a,T),P=w(B,1.13),J=function(e){c((function(t){var a=Object(s.a)({},t);return a[e]?(a[e]=a[e]+1,a.count=a.count+1):(a[e]=1,a.count=a.count+1),a}))},V=function(e){c((function(t){var a=Object(s.a)({},t);if(0!==a.count)return a.count=a.count-1,a[e]=a[e]-1,0===a[e]&&delete a[e],a}))},Y=function(e){c((function(t){var a=Object(s.a)({},t);if(a[e]){var n=a[e];a.count=a.count-n,delete a[e]}return a}))},U=function(){c({count:0})},q=function(e,t){b((function(a){var n=Object(m.a)(a);return n.push(Object(o.a)({},e,t)),n}))};return r.a.createElement(h.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{cartItems:a,pricesString:P}),r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("div",{className:"flex-shrink-1 sidebar-wrap"},r.a.createElement(j,{menuItems:H})),r.a.createElement("div",{className:"main-content-wrap w-100"},r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/",exact:!0,render:function(){return r.a.createElement(_,null,r.a.createElement(F,{menuItems:H}))}}),r.a.createElement(x.b,{path:"/order",render:function(){return E?r.a.createElement(x.a,{to:"/"}):C?r.a.createElement(I,null):r.a.createElement(_,null,r.a.createElement(M,{cartItems:a,flatMenu:T,currencyRate:1.13,pricesString:P,addToCart:J,removeFromCart:V,deleteFromCart:Y,orderHistory:d,setCartItems:c}))}}),r.a.createElement(x.b,{path:"/menu/:menuHeader",render:function(e){var t=function(e){if(z)return z.find((function(t){return t.header.toLowerCase()===e.toLowerCase()}))}(e.match.params.menuHeader);return t?r.a.createElement(_,null,r.a.createElement(k,{menuItem:t,addToCart:J,currencyRate:1.13})):z||E?r.a.createElement(x.a,{to:"/"}):void 0}}),r.a.createElement(x.b,{path:"/confirm",render:function(){return E?r.a.createElement(x.a,{to:"/"}):C?r.a.createElement(I,null):r.a.createElement(_,null,r.a.createElement(D,{price:B,cartItems:a,clearCart:U,saveOrderToHistory:q}))}}),r.a.createElement(x.a,{to:"/"}))))))};l.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.0d20224b.chunk.js.map